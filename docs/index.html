<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DebugScreen  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="DebugScreen  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">DebugScreen 0.1.0 Docs</a> (100% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">DebugScreen Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
        DebugScreen  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/DebugScreenConfiguration.html">DebugScreenConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LogCatcherService.html">LogCatcherService</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/UIWindow.html">UIWindow</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/CacheCleanerActionsProvider.html">CacheCleanerActionsProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/FeatureToggleActionsProvider.html">FeatureToggleActionsProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SelectServerActionsProvider.html">SelectServerActionsProvider</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CacheCleanerAction.html">CacheCleanerAction</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FeatureToggleModel.html">FeatureToggleModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SelectServerAction.html">SelectServerAction</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='debugscreen' class='heading'>DebugScreen</h1>

<p><a href="https://travis-ci.org/Anton%20Shelar/DebugScreen"><img src="https://img.shields.io/travis/Anton%20Shelar/DebugScreen.svg?style=flat" alt="CI Status"></a>
<a href="https://cocoapods.org/pods/DebugScreen"><img src="https://img.shields.io/cocoapods/v/DebugScreen.svg?style=flat" alt="Version"></a>
<a href="https://cocoapods.org/pods/DebugScreen"><img src="https://img.shields.io/cocoapods/l/DebugScreen.svg?style=flat" alt="License"></a>
<a href="https://cocoapods.org/pods/DebugScreen"><img src="https://img.shields.io/cocoapods/p/DebugScreen.svg?style=flat" alt="Platform"></a></p>
<h2 id='example' class='heading'>Example</h2>

<p>To run the example project, clone the repo, and run <code>pod install</code> from the Example directory first.</p>
<h2 id='requirements' class='heading'>Requirements</h2>
<h2 id='installation' class='heading'>Installation</h2>

<p>DebugScreen is available through <a href="https://cocoapods.org">CocoaPods</a>. To install
it, simply add the following line to your Podfile:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'DebugScreen'</span>
</code></pre>
<h2 id='author' class='heading'>Author</h2>

<p>Anton Shelar, <a href="mailto:shelaranton@gmail.com">shelaranton@gmail.com</a></p>
<h2 id='license' class='heading'>License</h2>

<p>DebugScreen is available under the MIT license. See the LICENSE file for more info.</p>
<h2 id='как-пользоваться' class='heading'>Как пользоваться</h2>

<p>Экран настроек появляется, если потрясти телефон.</p>

<p>Доступные функции:</p>

<p>cacheCleanerActionsProvider - очистка кэша.
selectServerActionsProvider - выбор сервера.
featureToggleActionsProvider - добавление FeatureToggles (бизнесовых и девелоперских).
logCatcherService - запись логов.</p>

<p>В библиотеку функции передаются через DebugScreenConfiguration.shared</p>
<h3 id='cacheactionsprovider' class='heading'>CacheActionsProvider</h3>

<p>Очистка кеша. Реализуется наследованием от CacheCleanerActionsProvider.
В CacheCleanerAction проставляется функционал в block, пример использования:</p>

<p>&ldquo;`CacheCleanerAction(title: &quot;Clear score&rdquo;, block: {
RatingService.clearScore()
RatingService.didRate = false
})</p>
<pre class="highlight plaintext"><code>
### SelectServerActionsProvider

Выбор сервера. Реализуется наследованием от SelectServerActionsProvider.
В SelectServerAction задаются url и выбирается основной, пример использования:

```SelectServerAction(url: URL(string: "https://surf.ru")!, title: "Surf", isActive: true)
...
func didSelectServer(_ server: SelectServerAction) {
Urls._base = server.url.absoluteString
}
</code></pre>
<h3 id='featuretoggleactionsprovider' class='heading'>FeatureToggleActionsProvider</h3>

<p>Работа с FeatureToggles. Реализуется наследованием от FeatureToggleActionsProvider.</p>
<h4 id='полезная-практика' class='heading'>Полезная практика</h4>

<p>Есть бизнесовые и девелоперские FeatureToggles. 
Бизнесовые - чисто true/false, на них делается проверка в коде для разрешения какой-либо реализации.
Девелоперские - те FeatureToggles, изменения которых обрабатываются глобально во всём коде. Например, отключение анимации. Эти FeatureToggle не проверяются в коде.</p>

<p>Поэтому есть список всех FeatureToggles, отдельно хранятся бизнесовые FeatureToggles для проверки их в коде.</p>

<p>FeatureToggleKey - enum с перечислением всех кейсов FeatureToggles и их названиями. Тут и бизнесовые, и девелоперские.
&ldquo;`enum FeatureToggleKey: String {
case feature1
case feature2
case business1 = &quot;PushNotifications&rdquo;
}</p>
<pre class="highlight plaintext"><code>
BusinessFeatureToggle - enum со статическими FeatureToggles на true/false. 
```enum BusinessFeatureToggle {
static var isPushNotificationsAvailable = false
}
</code></pre>

<p>В таком случае actions провайдера будут выглядеть следующим образом:
&ldquo;` func actions() -&gt; [FeatureToggleModel] {
return [
    FeatureToggleModel(text: FeatureToggleKey.feature1.rawValue, value: true),
    FeatureToggleModel(text: FeatureToggleKey.feature2.rawValue, value: false),
    FeatureToggleModel(text: FeatureToggleKey.business1.rawValue, value: BusinessFeatureToggle.isPushNotificationsAvailable)
]
}</p>
<pre class="highlight plaintext"><code>
Также идёт обработка события выбора FeatureToggle. Для девелоперских прописываются обработчики действий. Для бизнесовых изменяется значение переменной:
```func handleAction(with text: String, newValue: Bool) {
        guard let featureToggle = FeatureToggleKey(rawValue: text) else {
            return
        }

        switch featureToggle {
        case .feature1:
            doAction1()
        case .feature2:
            doAction2()
        case .business1:
            BusinessFeatureToggle.isPushNotificationsAvailable = newValue
        }
    }

    func doAction1() { }
    func doAction2() { }
</code></pre>
<h3 id='логирование' class='heading'>Логирование</h3>

<p>Для записи логов указать в настройках:</p>
<pre class="highlight plaintext"><code>DebugScreenConfiguration.shared.logCatcherService.setStdOutCatcherEnabled()
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2022 <a class="link" href="https://github.com/surfstudio/DebugScreen" target="_blank" rel="external noopener">Anton Shelar</a>. All rights reserved. (Last updated: 2022-06-29)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
